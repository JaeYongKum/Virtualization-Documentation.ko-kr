---
title: Inter-Partition 통신
description: Inter-Partition 통신
keywords: hyper-v
author: alexgrest
ms.author: alegre
ms.date: 10/15/2020
ms.topic: reference
ms.prod: windows-10-hyperv
ms.openlocfilehash: 5773ca47af0d5967186af80330e6387772646107
ms.sourcegitcommit: d43632e3dc22e2b7a256b5c15fbb665c047de286
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/16/2020
ms.locfileid: "92120917"
---
# <a name="inter-partition-communication"></a>Inter-Partition 통신

하이퍼바이저는 한 파티션에 서로 통신 하는 두 가지 간단한 메커니즘인 메시지와 이벤트를 제공 합니다. 두 경우 모두, notification은 Syic (가상 인터럽트 컨트롤러)를 사용 하 여 신호를 전달 합니다.

## <a name="synic-messages"></a>Syic 메시지

하이퍼바이저는 한 파티션에서 다른 파티션으로 매개 변수가 있는 메시지를 보낼 수 있도록 하는 간단한 파티션 간 통신 기능을 제공 합니다. 메시지는 비동기적으로 전송 되기 때문에 게시 된 것으로 간주 됩니다. 대상 파티션에는 인터럽트를 통해이 메시지가 도착 했다는 알림이 표시 될 수 있습니다. 메시지는 [HvCallPostMessage](hypercalls/HvCallPostMessage.md) hypercall를 사용 하 여 명시적으로 전송 되거나 하이퍼바이저에서 암시적으로 전송 될 수 있습니다.

### <a name="messages"></a>메시지

메시지가 전송 되 면 하이퍼바이저는 사용 가능한 메시지 버퍼를 선택 합니다. 사용 가능한 메시지 버퍼 집합은 메시지 보내기를 트리거한 이벤트에 따라 달라 집니다.

하이퍼바이저는 "사용 중인" 메시지 버퍼를 표시 하 고 메시지 유형, 페이로드 크기 및 발신자에 대 한 정보로 메시지 헤더를 채웁니다. 마지막으로 메시지 페이로드를 채웁니다. 페이로드의 콘텐츠는 메시지를 트리거한 이벤트에 따라 달라 집니다.

그런 다음 하이퍼바이저는 메시지 버퍼를 수신 메시지 큐에 추가 합니다. 받는 메시지 큐는 메시지 보내기를 트리거한 이벤트에 따라 달라 집니다. 모든 메시지 유형의 경우 SINTx는 암시적 (가로채기 메시지의 경우), explicit (타이머 메시지의 경우) 또는 포트 ID (게스트 메시지의 경우)로 지정 됩니다. 대상 가상 프로세서는 메시지를 큐에 넣을 때 하이퍼바이저에 의해 명시적으로 지정 되거나 선택 됩니다. Syic 또는 SIM 페이지를 사용 하지 않도록 설정 된 가상 프로세서는 잠재적 대상으로 간주 되지 않습니다. 사용할 수 있는 대상이 없으면 하이퍼바이저는 작업을 종료 하 고 호출자에 게 오류를 반환 합니다.

그런 다음 하이퍼바이저는 대상 가상 프로세서의 [SIM 페이지](#sim-page) 내에서 지정 된 SINTx 메시지 슬롯이 비어 있는지 여부를 확인 합니다. 메시지 슬롯의 메시지 유형이 HvMessageTypeNone (즉, 0)과 같으면 메시지 슬롯은 비어 있는 것으로 간주 됩니다. 이 경우 하이퍼바이저는 메시지 버퍼를 큐에 대기 시키고 해당 내용을 SIM 페이지 내의 메시지 슬롯에 복사 합니다. 하이퍼바이저는 메시지에 연결 된 페이로드 바이트만 복사할 수 있습니다. 또한 하이퍼바이저는 지정 된 SINTx에 대 한에 지 트리거된 인터럽트를 생성 하려고 시도 합니다. APIC가 소프트웨어를 사용 하지 않도록 설정 되어 있거나 SINTx가 마스킹 된 경우 인터럽트가 손실 됩니다. 이 인터럽트가 도착 하면 새 메시지가 도착 했음을 게스트에 게 알립니다. SIM 페이지를 사용 하지 않도록 설정 하거나 SIM 페이지 내의 메시지 슬롯이 비어 있지 않으면 메시지가 큐에 대기 상태를 유지 하 고 인터럽트가 생성 되지 않습니다.

고정 우선 순위 인터럽트와 마찬가지로, 가상 프로세서에서는 PPR (프로세스 우선 순위 레지스터)이 SINTx 레지스터에 지정 된 벡터 보다 작고 가상 프로세서 (rFLAGS [IF]가 1로 설정 됨)에서 인터럽트를 마스킹 하지 않을 때까지 가상 프로세서에서 인터럽트를 승인 하지 않습니다.

SINTx가 같은 여러 메시지 버퍼를 가상 프로세서로 큐에 넣을 수 있습니다. 이 경우 하이퍼바이저는 첫 번째 메시지를 배달 하 고 (즉, SIM 페이지에 기록) 세 가지 이벤트 중 하나가 발생할 때까지 다른 큐에 대기 시킵니다.

- 다른 메시지 버퍼가 대기 중입니다.
- 게스트는 APIC의 EOI 레지스터에 기록 하 여 "인터럽트 종료"를 나타냅니다.
- 게스트는 Syic의 [Eom 레지스터](#eom-register)에 기록 하 여 "메시지의 끝"을 나타냅니다.

세 경우 모두 하이퍼바이저는 하나 이상의 메시지 버퍼 큐를 검색 하 고 추가 메시지를 배달 하려고 시도 합니다. 또한 하이퍼바이저는 새 메시지가 도착 했음을 나타내는에 지 트리거된 인터럽트를 생성 하려고 시도 합니다.

#### <a name="sim-page"></a>SIM 페이지

SIM 페이지는 256 바이트 메시지의 16 요소 배열로 구성 됩니다 (데이터 구조 [HV_MESSAGE](datatypes/HV_MESSAGE.md) 참조). 각 배열 요소 (메시지 슬롯이 라고도 함)는 단일 가상 인터럽트 원본 (SINTx)에 해당 합니다. 슬롯에 있는 메시지의 메시지 유형이 HvMessageTypeNone과 같은 경우 메시지 슬롯은 "빈" 것으로 간주 됩니다.

[SIMP 레지스터](#simp-register)에 SIM 페이지의 주소가 지정 됩니다. SIM 페이지의 주소는 각 가상 프로세서에 대해 고유 해야 합니다. 이러한 페이지를 프로그래밍 하 여 SIEF 또는 SIM 페이지 또는 기타 오버레이 페이지 (예: hypercall 페이지)의 다른 인스턴스와 겹치게 하면 정의 되지 않은 동작이 발생 합니다.

가상 프로세서에서 SIM 페이지로의 읽기 및 쓰기 액세스는 RAM에 대 한 읽기 및 쓰기 액세스 처럼 동작 합니다. 그러나 하이퍼바이저의 Syic 구현은 특정 이벤트에 대 한 응답으로 페이지에도 씁니다.

가상 프로세서를 만들고 다시 설정 하면 SIM 페이지가 0으로 지워집니다.

#### <a name="recommended-message-handling"></a>권장 메시지 처리

Syic 메시지 배달 메커니즘은 대상 파티션 내에서 메시지를 효율적으로 배달 하 고 받을 수 있도록 설계 되었습니다. 대상 파티션 내에서 ISR (인터럽트 서비스 루틴)을 처리 하는 메시지는 다음 단계를 수행 하는 것이 좋습니다.

- SIM 메시지 슬롯에 보관 된 메시지를 검사 합니다.
- 메시지의 내용을 다른 위치로 복사 하 고 메시지 슬롯 내의 메시지 유형을 HvMessageTypeNone으로 설정 합니다.
- APIC의 EOI 레지스터에 기록 하 여 벡터의 인터럽트 끝을 표시 합니다.
- 메시지에 포함 된 모든 작업을 수행 합니다.

#### <a name="message-sources"></a>메시지 원본

메시지 보내기를 트리거할 수 있는 이벤트 클래스는 다음과 같습니다.

- 가로채기: 가상 프로세서의 모든 가로채기는 부모 파티션 또는 더 높은 VTL 메시지를 전송 합니다.
- 타이머: 타이머 메커니즘으로 인해 메시지가 전송 됩니다. 각 가상 프로세서와 연결 된는 타이머 마다 하나씩 4 개의 전용 타이머 메시지 버퍼입니다. 수신 하는 메시지 큐는 타이머가 메시지 보내기를 트리거한 가상 프로세서의 SINTx에 속합니다.
- 게스트 메시지: 하이퍼바이저는 게스트 간의 파티션 간 통신 메커니즘으로 메시지 전달을 지원 합니다. 이 섹션에 정의 된 인터페이스를 사용 하면 한 게스트가 다른 게스트에 메시지를 보낼 수 있습니다. 이 클래스의 메시지에 사용 되는 메시지 버퍼는 게스트 메시지 버퍼의 수신 포트 풀에서 가져옵니다.

### <a name="message-buffers"></a>메시지 버퍼

메시지 버퍼는 메시지를 받는 사람에 게 배달 될 때까지 메시지를 저장 하기 위해 하이퍼바이저에 내부적으로 사용 됩니다. 하이퍼바이저는 여러 메시지 버퍼 집합을 유지 관리 합니다.

#### <a name="guest-message-buffers"></a>게스트 메시지 버퍼

하이퍼바이저는 각 포트에 대 한 게스트 메시지 버퍼 집합을 유지 관리 합니다. 이러한 버퍼는 게스트에 의해 한 파티션에서 다른 파티션으로 명시적으로 전송 되는 메시지에 사용 됩니다. 포트를 만들 때 하이퍼바이저는 포트 소유자의 메모리 풀에서 16 개의 메시지 버퍼를 할당 합니다. 이러한 메시지 버퍼는 포트가 삭제 될 때 메모리 풀로 반환 됩니다.

#### <a name="message-buffer-queues"></a>메시지 버퍼 큐

하이퍼바이저는 파티션의 각 파티션 및 각 가상 프로세서에 대해 가상 프로세서의 Syic에서 각 SINTx (가상 인터럽트 원본)에 대해 하나의 메시지 버퍼 큐를 유지 관리 합니다. 가상 프로세서의 모든 메시지 큐는 가상 프로세서를 만들거나 다시 설정할 때 비어 있습니다.

#### <a name="reliability-and-sequencing-of-guest-message-buffers"></a>게스트 메시지 버퍼의 안정성 및 시퀀싱

게스트가 성공적으로 게시 한 메시지는 하이퍼바이저에서 배달을 위해 큐에 대기 되었습니다. 대상 파티션에의 한 실제 배달 및 수신은 올바른 작업에 종속 됩니다. 해당 Syic를 사용 하지 않도록 설정 하거나 SIMP을 해제 하 여 특정 가상 프로세서에 대 한 메시지 배달을 사용 하지 않도록 설정할 수 있습니다.

연결을 끊는 것은 배달 되지 않은 (대기 중) 메시지에 영향을 주지 않습니다. 대상 포트를 삭제 하면 사용 가능 여부에 관계 없이 항상 모든 포트의 메시지 버퍼가 해제 되거나 배달 되지 않은 (대기 중) 메시지가 포함 됩니다.

메시지가 성공적으로 게시 된 순서 대로 도착 합니다. 수신 포트가 특정 가상 프로세서와 연결 된 경우 메시지는 게시 된 순서와 동일한 순서로 도착 합니다. 수신 포트가 HV_ANY_VP와 연결 된 경우 메시지가 특정 순서로 도착 하지 않을 수 있습니다.

## <a name="synic-event-flags"></a>Syic 이벤트 플래그

메시지 외에도 Syic는 이벤트 플래그 라는 두 번째 유형의 파티션 간 알림 메커니즘을 지원 합니다. 이벤트 플래그는 [HvCallSignalEvent](hypercalls/HvCallSignalEvent.md) hypercall를 사용 하 여 명시적으로 설정 하거나 하이퍼바이저에서 암시적으로 설정할 수 있습니다.

### <a name="event-flags-versus-messages"></a>이벤트 플래그 및 메시지

이벤트 플래그는 메시지 보다 더 가벼운 하므로 오버 헤드가 낮아집니다. 또한 이벤트 플래그에는 하이퍼바이저 내에서의 버퍼 할당 또는 대기가 필요 하지 않으므로 리소스가 부족 하기 때문에 HvCallSignalEvent가 실패 하지 않습니다.

### <a name="event-flag-delivery"></a>이벤트 플래그 배달

HvCallSignalEvent가 호출 하는 파티션은 이벤트 플래그 번호를 지정 합니다. 하이퍼바이저는 수신 가상 프로세서의 [Sief 페이지](#sief-page)내에서 비트를 원자 단위로 설정 하 여 응답 합니다. Syic 또는 SIEF 페이지가 사용 하지 않도록 설정 된 가상 프로세서는 잠재적 대상으로 간주 되지 않습니다. 사용할 수 있는 대상이 없으면 하이퍼바이저는 작업을 종료 하 고 호출자에 게 오류를 반환 합니다.

이전에 이벤트 플래그가 지워진 경우 하이퍼바이저는에 지 트리거된 인터럽트를 생성 하 여 플래그가 설정 되었음을 수신 파티션에 알립니다. 대상 가상 프로세서는 대상 SINTx와 함께 포트 만들기의 일부로 지정 됩니다. SINTx가 마스킹 된 경우 HvSignalEvent는 HV_STATUS_INVALID_SYNIC_STATE을 반환 합니다.

고정 우선 순위 외부 인터럽트와 마찬가지로, 프로세스 우선 순위 등록 (PPR)이 SINTx 레지스터에 지정 된 벡터 보다 작고 가상 프로세서에서 인터럽트를 마스킹 하지 않을 때까지 가상 프로세서에서 인터럽트가 승인 되지 않습니다 (rFLAGS [IF]가 1로 설정 됨).

#### <a name="sief-page"></a>SIEF 페이지

SIEF 페이지는 256 바이트 이벤트 플래그의 16 요소 배열로 구성 됩니다 ( [HV_SYNIC_EVENT_FLAGS](datatypes/HV_SYNIC_EVENT_FLAGS.md)참조). 각 배열 요소는 단일 가상 인터럽트 원본 (SINTx)에 해당 합니다.

Sief 페이지의 주소는 [sief 레지스터](#siefp-register)에 지정 됩니다. SIEF 페이지의 주소는 각 가상 프로세서에 대해 고유 해야 합니다. 이러한 페이지를 프로그래밍 하 여 SIEF 또는 SIM 페이지 또는 기타 오버레이 페이지 (예: hypercall 페이지)의 다른 인스턴스와 겹치게 하면 정의 되지 않은 동작이 발생 합니다.

SIEF 페이지에 대 한 가상 프로세서의 읽기 및 쓰기 액세스는 RAM에 대 한 읽기 및 쓰기 액세스 처럼 동작 합니다. 그러나 하이퍼바이저의 Syic 구현은 특정 이벤트에 대 한 응답으로 페이지에도 씁니다.

가상 프로세서를 만들고 다시 설정 하면 SIEF 페이지가 0으로 지워집니다.

### <a name="recommended-event-flag-handling"></a>권장 이벤트 플래그 처리

대상 파티션 내에서 인터럽트 서비스 루틴 (ISR) 플래그를 지정 하는 경우 다음 단계를 수행 하는 것이 좋습니다.

- 이벤트 플래그를 검사 하 고 설정 된 이벤트를 확인 합니다.
- LOCK 및 or LOCK CMPXCHG와 같이 잠긴 (원자성) 작업을 사용 하 여 하나 이상의 이벤트 플래그를 지웁니다.
- APIC의 EOI 레지스터에 기록 하 여 벡터의 인터럽트 끝을 표시 합니다.
- 설정 된 이벤트 플래그가 암시 하는 작업을 수행 합니다.

## <a name="ports-and-connections"></a>포트 및 연결

한 게스트에서 다른 게스트로 전송 된 메시지나 이벤트는 미리 할당 된 연결을 통해 전송 되어야 합니다. 그러면 연결이 대상 포트와 연결 되어야 합니다.

수신기의 메모리 풀에서 포트를 할당 하 고 대상으로 지정할 가상 프로세서 및 SINTx를 지정 합니다. 이벤트 포트에는 호출자가 해당 포트에 유효한 이벤트 플래그의 범위를 지정할 수 있도록 하는 "기본 플래그 번호" 및 "플래그 개수"가 있습니다.

연결은 보낸 사람의 메모리 풀에서 할당 됩니다. 연결이 생성 되 면 유효한 포트에 연결 되어야 합니다. 이 바인딩은 간단한 단방향 통신 채널을 만듭니다. 이후에 포트를 삭제 하는 경우에는 연결이 유지 되는 동안 연결이 쓸모 없게 됩니다.

## <a name="synic-msrs"></a>Syic MSRs

로컬 APIC에 대해 정의 된 메모리 매핑된 레지스터 외에도 다음과 같은 MSRs (모델 관련 레지스터)는 Syic에 정의 되어 있습니다. 각 가상 프로세서에는 이러한 레지스터의 고유한 복사본이 있으므로 독립적으로 프로그래밍할 수 있습니다.

| MSR 주소             | 이름 등록         | 기능                             |
|-------------------------|-----------------------|--------------------------------------|
| 0x40000080              | SCONTROL              | Syic 컨트롤                        |
| 0x40000081              | HIS              | Syic 버전                        |
| 0x40000082              | SIEFP                 | 인터럽트 이벤트 플래그 페이지           |
| 0x40000083              | SIMP                  | 메시지 중단 페이지               |
| 0x40000084              | EOM                   | 메시지 끝                       |
| 0x40000090              | SINT0                 | 인터럽트 원본 0 (하이퍼바이저)      |
| 0x40000090              | SINT1                 | 인터럽트 원본 1                   |
| 0x40000090              | SINT2                 | 인터럽트 원본 2                   |
| 0x40000090              | SINT3                 | 인터럽트 원본 3                   |
| 0x40000090              | SINT4                 | 인터럽트 원본 4                   |
| 0x40000090              | SINT5                 | 인터럽트 원본 5                   |
| 0x40000090              | SINT6                 | 인터럽트 원본 6                   |
| 0x40000090              | SINT7                 | 인터럽트 원본 7                   |
| 0x40000090              | SINT8                 | 인터럽트 원본 8                   |
| 0x40000090              | SINT9                 | 인터럽트 원본 9                   |
| 0x40000090              | SINT10                | 인터럽트 원본 10                  |
| 0x40000090              | SINT11                | 인터럽트 원본 11                  |
| 0x40000090              | SINT12                | 인터럽트 원본 12                  |
| 0x40000090              | SINT13                | 인터럽트 원본 13                  |
| 0x40000090              | SINT14                | 인터럽트 원본 14                  |
| 0x40000090              | SINT15                | 인터럽트 원본 15                  |

### <a name="scontrol-register"></a>SCONTROL 레지스터

이 레지스터는 가상 프로세서의 Syic 동작을 제어 하는 데 사용 됩니다.

가상 프로세서를 만들 때와 프로세서를 다시 설정 하면이 SCONTROL (Syic 컨트롤 레지스터)의 값은 0 x 0000000000000000입니다. 따라서 메시지 큐 및 이벤트 플래그 알림이 사용 하지 않도록 설정 됩니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:1      | RsvdP           | 값을 유지 해야 합니다.                                                     | 읽기/쓰기   |
| 0         | 사용          | 설정 하면이 가상 프로세서는 메시지 큐 및 이벤트 플래그 알림을 Syic에 게시할 수 있도록 허용 합니다. 이 확인란의 선택을 취소 하면 메시지 큐 및 이벤트 플래그 알림을이 가상 프로세서로 보낼 수 없습니다. | 읽기/쓰기 |

### <a name="sversion-register"></a>SVERSION 레지스터

이는 읽기 전용 레지스터 이며 Syic의 버전 번호를 반환 합니다. 이 레지스터에 쓰려고 하면 #GP 오류가 발생 합니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:32     | RsvdP           |                                                                             | 읽기           |
| 31:0      | Syic 버전   | Syic의 버전 번호                                                 | 읽기           |

#### <a name="siefp-register"></a>SIEFP 레지스터

가상 프로세서를 만든 시간 및 프로세서 재설정 시이 SIEFP (가상 인터럽트 이벤트 플래그 페이지) 레지스터의 값은 0 x 0000000000000000입니다. 따라서 SIEFP는 기본적으로 사용 되지 않습니다. 게스트는 비트 0을 설정 하 여 사용 하도록 설정 해야 합니다. 지정 된 기본 주소가 파티션의 GPA 공간 끝을 초과 하면 SIEFP 페이지는 게스트에 액세스할 수 없습니다. 등록을 수정 하는 경우 게스트는 이후 버전과의 호환성을 위해 예약 된 비트 (1-11)의 값을 유지 해야 합니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:12     | 기준 주소    | SIEFP의 기준 주소 (GPA space) (하위 12 비트는 사용 하지 않도록 설정 된 것으로 간주 됨)   | 읽기/쓰기   |
| 11:1      | RsvdP           | 예약 됨, 값을 유지 해야 함                                         | 읽기/쓰기   |
| 0         | 사용          | SIEFP 사용                                                                | 읽기/쓰기   |

#### <a name="simp-register"></a>SIMP 레지스터

가상 프로세서를 만든 시간 및 프로세서 재설정 시이 SIMP (가상 인터럽트 메시지 페이지) 레지스터의 값은 0 x 0000000000000000입니다. 따라서 SIMP는 기본적으로 사용 하지 않도록 설정 되어 있습니다. 게스트는 비트 0을 설정 하 여 사용 하도록 설정 해야 합니다. 지정 된 기본 주소가 파티션에 있는 GPA 공간의 끝을 초과 하면 SIMP 페이지에 게스트가 액세스할 수 없게 됩니다. 등록을 수정 하는 경우 게스트는 이후 버전과의 호환성을 위해 예약 된 비트 (1-11)의 값을 유지 해야 합니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:12     | 기준 주소    | SIMP (GPA space)의 기준 주소 (하위 12 비트는 사용 하지 않도록 설정 된 것으로 간주 됨)   | 읽기/쓰기   |
| 11:1      | RsvdP           | 예약 됨, 값을 유지 해야 함                                         | 읽기/쓰기   |
| 0         | 사용          | SIMP 사용                                                                 | 읽기/쓰기   |

#### <a name="sintx-registers"></a>SINTx 레지스터

가상 프로세서를 만들 때 모든 SINTx (가상 인터럽트 원본) 레지스터의 기본값은 0x0000000000010000입니다. 따라서 기본적으로 모든 가상 인터럽트 소스가 마스킹 됩니다. 게스트는 적절 한 벡터를 프로그래밍 하 고 비트 16을 지우는 방법으로 마스크를 해제 해야 합니다.

실제 인터럽트가 생성 되지 않는다는 점을 제외 하 고, 폴링 비트를 설정 하면 인터럽트 원본 마스크 해제 영향을 받습니다.

AutoEOI 플래그는 가상 프로세서에 인터럽트를 전달할 때 하이퍼바이저에서 암시적 EOI를 수행 해야 함을 나타냅니다. 또한 하이퍼바이저는 가상 APIC의 "서비스 내 레지스터" (ISR)에서 해당 플래그를 자동으로 지웁니다. 게스트가이 동작을 사용 하도록 설정한 경우에는 해당 인터럽트 서비스 루틴에서 EOI를 수행 하지 않아야 합니다.
AutoEOI 플래그는 언제 든 지 켤 수 있지만 게스트는 진행 중인 인터럽트에 대해 명시적 EOI를 수행 해야 하지만, 타이밍 고려 사항은 특정 인터럽트에 EOI가 필요한 지 여부를 확인 하기 어렵기 때문에,이 경우에는 해당 설정이 변경 되지 않습니다. 마찬가지로, 진행 중인 인터럽트가 적용 되는 것과 동일한 문제가 발생 하더라도 AutoEOI 플래그는 언제 든 지 해제할 수 있습니다.

벡터에 대 한 유효한 값은 16-255 포함입니다. 잘못 된 벡터 번호를 지정 하면 #GP 발생 합니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:19     | RsvdP           | 예약 됨, 값을 유지 해야 함                                         | 읽기/쓰기   |
| 18        | 폴링         | 폴링 모드를 사용 합니다.                                                        | 읽기/쓰기   |
| 17        | AutoEOI         | 인터럽트 배달 시 암시적 EOI 수행 해야 하는 경우 설정          | 읽기/쓰기   |
| 16        | 마스크됨          | 인 트를 마스킹할 경우 설정                                                   | 읽기/쓰기   |
| 15:8      | RsvdP           | 예약 됨, 값을 유지 해야 함                                         | 읽기/쓰기   |
| 7:0       | 벡터          | 인터럽트 벡터                                                            | 읽기/쓰기   |

#### <a name="eom-register"></a>EOM 레지스터

게스트에의 한 EOM (메시지 끝)을 쓰면 하이퍼바이저가 가상 프로세서와 연결 된 내부 메시지 버퍼 큐를 검색 합니다. 메시지 버퍼 큐에 대기 중인 메시지 버퍼가 포함 된 경우 하이퍼바이저는 메시지를 배달 하려고 시도 합니다. SIM 페이지를 사용 하도록 설정 하 고 SINTx에 해당 하는 메시지 슬롯이 비어 있으면 (즉, 헤더의 메시지 유형이 HvMessageTypeNone으로 설정 됨) 메시지 배달이 성공 합니다. 메시지가 성공적으로 배달 되 면 해당 내부 메시지 버퍼가 큐에서 제거 되 고 사용 가능으로 표시 됩니다. 해당 SINTx가 마스킹 되지 않은 경우에 지 트리거된 인터럽트가 전달 됩니다 (즉, IRR의 해당 비트가 설정 됨).

게스트는이 등록을 사용 하 여 메시지를 "폴링" 할 수 있습니다. 사용 하지 않도록 설정 된 (즉, 마스크 된) SINTx에 대 한 메시지 큐를 드레이닝 하는 방법으로도 사용할 수 있습니다.

메시지 큐가 모두 비어 있으면 EOM 레지스터에 대 한 쓰기는 작동 하지 않습니다.

EOM 레지스터에서 읽기는 항상 0을 반환 합니다.

| 비트      | 필드           | Description                                                                 | 특성     |
|-----------|-----------------|-----------------------------------------------------------------------------|----------------|
| 63:0      | RsvdZ           | 쓰기 전용 트리거                                                          | 쓰기          |